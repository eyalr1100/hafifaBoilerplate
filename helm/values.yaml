global:
  cloudProvider: {}
  tracing: {}
  metrics: {}
  environment: {}

enabled: true
environment: development
replicaCount: 1
initialDelaySeconds: 600

annotations: {}
podAnnotations: {}

cloudProvider:
  dockerRegistryUrl:
  flavor: openshift

image:
  repository: eyal-hafifa-app
  tag: 'v1.0.0'
  pullPolicy: Always
imagePullSecrets:
  - name: acr-secret

env:
  CONFIG_OFFLINE_MODE: "true"
  CONFIG_NAME: "eyal-hafifa-server"
  CONFIG_VERSION: "latest"
  CONFIG_SERVER_URL: "http://config-server:8080/api"
  
  # Application settings
  targetPort: 8080
  protocol: TCP
  logLevel: info
  logPrettyPrintEnabled: false
  requestPayloadLimit: 1mb
  responseCompressionEnabled: true
  port: 8080
  
  # Tracing & Metrics
  tracing:
    enabled: false
    url: 'http://localhost:55681/v1/trace'
    ratio: 1
  metrics:
    enabled: false
    url: 'http://localhost:55681/v1/metrics'

# Config Management section
configManagement:
  offlineMode: true
  name: 'eyal-hafifa-server'
  version: 'latest'  
  serverUrl: 'http://config-server:8080/api'

# REMOVE the entire dbConfig section - not needed anymore

# ADD extraEnvVars for database configuration
extraEnvVars:
  - name: NODE_ENV
    value: "production"
  - name: DB_HOST
    value: "postgresql-postgis"
  - name: DB_PORT
    value: "5432"
  - name: DB_USER
    valueFrom:
      secretKeyRef:
        name: postgresql-secret
        key: POSTGRES_USER
  - name: DB_PASSWORD
    valueFrom:
      secretKeyRef:
        name: postgresql-secret
        key: POSTGRES_PASSWORD
  - name: DB_NAME
    valueFrom:
      secretKeyRef:
        name: postgresql-secret
        key: POSTGRES_DB

resources:
  enabled: false
  value:
    limits:
      cpu: 100m
      memory: 128Mi
    requests:
      cpu: 100m
      memory: 128Mi

route:
  enabled: true
  path: /
  tls:
    termination: edge
  timeout:
    enabled: false
    duration: 60s

ingress:
  enabled: false

livenessProbe:
  enabled: true
  path: /liveness
  initialDelaySeconds: 60
  timeoutSeconds: 5
  periodSeconds: 10
  failureThreshold: 3

readinessProbe:
  enabled: true
  path: /liveness
  initialDelaySeconds: 60
  timeoutSeconds: 5
  periodSeconds: 10
  failureThreshold: 3
